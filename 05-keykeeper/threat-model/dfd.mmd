---
title: Data Flow Diagram - KeyKeeper Secrets Vault
---

flowchart LR

%% ===== External Entity =====
subgraph External["External Entity"]
    User[Developer / DevOps / Admin]
end

%% ===== Client Trust Boundary =====
subgraph ClientTrust["Trust Boundary: Client"]
    FE[KeyKeeper Web Client\n(port 5175)]
end

%% ===== Server Trust Boundary =====
subgraph ServerTrust["Trust Boundary: Server"]
    API[KeyKeeper API\n(port 5055)]
    AUTH[Auth Middleware\n(JWT + RBAC)]
    DB[(Secrets Database)]
    LOG[(Access Log)]
end

%% ===== Authentication Flow =====
User -->|"Login Credentials"| FE
FE -->|"POST /login\nJWT issued"| API
API --> AUTH
AUTH --> API

%% ===== Metadata Access (Page Load) =====
FE -->|"GET /items\n(metadata only)"| API
API --> AUTH
AUTH --> API
API -->|"Secret metadata\n(name, env, status)"| FE

%% ===== Explicit Secret Reveal =====
FE -->|"POST /items/:id/reveal"| API
API --> AUTH
AUTH --> API
API -->|"Authorization check\n(role + sharedWith)"| API
API -->|"Read secretValue"| DB
API -->|"Write access event"| LOG
API -->|"secretValue (explicit reveal)"| FE

%% ===== Styling (Travelers-Inspired) =====
classDef external fill:#f2f2f2,stroke:#333333,stroke-width:2px
classDef client fill:#cce0f5,stroke:#003a8f,stroke-width:2px
classDef server fill:#003a8f,stroke:#00224d,stroke-width:2px,color:#ffffff
classDef database fill:#f5d6d6,stroke:#a30000,stroke-width:2px
classDef audit fill:#e6e6e6,stroke:#666666,stroke-width:2px

class User external
class FE client
class API server
class AUTH server
class DB database
class LOG audit
